//ウィンドウを表示するプログラム（ひな形）		//制作者：　,2309402出光真那斗,2309405宇賀塚暖紀

#include "DxLib.h"	//DXライブラリのインクルード
#include"ScenePlay/Scene.h"
#include"ScenePlay/ScenePlay.h"

//現在のシーンID
int g_CurrentSceneID = SCENE_ID_INIT_PLAY;

// define
#define	SCREEN_SIZE_X	640	// X方向の画面サイズを指定
#define	SCREEN_SIZE_Y	480	// Y方向の画面サイズを指定
//自機情報
#define PLAYER_PATH		"Data/PlayImage/teki1.png"	    //自機のパス
#define PLAYER_MOVE_NORMAL_SPEED (1)    //プレイヤーの通常移動速度

// Win32アプリケーションは WinMain関数 から始まる
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{
	//ウィンドウの状態を設定する
	ChangeWindowMode(true);

	//DXライブラリの初期化
	if (DxLib_Init() == -1) {
		return -1;
	}

	// 画面サイズを変更
	SetGraphMode(SCREEN_SIZE_X, SCREEN_SIZE_Y, 32);

	//描画するスクリーンを設定する
	SetDrawScreen(DX_SCREEN_BACK);
	
	//-----------------------------------------
	//一番最初に１回だけやる処理をここに書く

	VECTOR pos = { 100,200,1 };
	//-----------------------------------------

	//ゲームメインループ
	while (ProcessMessage() != -1)
	{
		if (CheckHitKey(KEY_INPUT_ESCAPE) == 1)
		{
			//エスケープキーが押されたら終了
			break;
		}

		//画面に表示されたものを初期化
		ClearDrawScreen();

		//-----------------------------------------
		//ここからゲームの本体を書くことになる
		//-----------------------------------------
		switch (g_CurrentSceneID)
		{
			//プレイシーン
		case SCENE_ID_INIT_PLAY:
		{
			InitPlay();
		}
		break;

		case SCENE_ID_LOOP_PLAY:
		{

			StepPlay();

			DrawPlay();
		}
		break;

		case SCENE_ID_FIN_PLAY:
		{
			FinPlay();
		}
		break;
		}
		/*//プレイヤー初期化
		int playerhandle = LoadGraph(PLAYER_PATH);
		int playerx = 0;
		int playery = 0;

		int moveSpeed = PLAYER_MOVE_NORMAL_SPEED;  //移動スピード

		//移動処理(右)
		if (CheckHitKey(KEY_INPUT_RIGHT)) {
			playerx += 1;
		}
		//移動処理(左)
		if (CheckHitKey(KEY_INPUT_LEFT)) {
			playerx -= 1;
		}
		//移動処理(上)
		if (CheckHitKey(KEY_INPUT_UP)) {
			playery -= 1;
		}
		//移動処理(下)
		if (CheckHitKey(KEY_INPUT_DOWN)) {
			playery += 1;
		}

		//動作Test (仮壁)
		DrawBox(SCREEN_SIZE_X / 2 - 200, SCREEN_SIZE_Y / 2 - 200, 
			SCREEN_SIZE_X / 2 + 200, SCREEN_SIZE_Y / 2 + 200, GetColor(0, 225, 225), false);	//壁
		DrawBox(SCREEN_SIZE_X / 2 - 200, SCREEN_SIZE_Y / 2 - 200, 
			SCREEN_SIZE_X / 2 - 300, SCREEN_SIZE_Y / 2 + 200, GetColor(0, 100, 225), true);		//左壁
		DrawBox(SCREEN_SIZE_X / 2 + 200, SCREEN_SIZE_Y / 2 - 200, 
			SCREEN_SIZE_X / 2 + 300, SCREEN_SIZE_Y / 2 + 200, GetColor(0, 100, 225), true);		//右壁
		DrawBox(SCREEN_SIZE_X / 2 - 200, SCREEN_SIZE_Y / 2 - 200, 
			SCREEN_SIZE_X / 2 + 200, SCREEN_SIZE_Y / 2 - 300, GetColor(0, 100, 225), true);		//上壁
		DrawBox(SCREEN_SIZE_X / 2 - 200, SCREEN_SIZE_Y / 2 + 200,
			SCREEN_SIZE_X / 2 + 200, SCREEN_SIZE_Y / 2 + 300, GetColor(0, 100, 225), true);		//下壁

		//プレイヤーの描画
		DrawGraph(playerx, playery, playerhandle, true);*/

		//-----------------------------------------
		//ループの終わりに
		//フリップ関数
		ScreenFlip();

	}

	//-----------------------------------------
	//最後に１回だけやる処理をここに書く


	//-----------------------------------------
	//DXライブラリの後処理
	DxLib_End();

	return 0;
}

